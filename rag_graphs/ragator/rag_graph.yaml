state:
    id: state
    module_path: rag_graphs.ragator.models
    class_name: RagState

entry_point: load_rag_params

nodes:
  - id: load_rag_params
    module_path: rag_graphs.ragator.nodes.load_rag_params
    function_name: main

  - id: classify_question
    module_path: rag_graphs.ragator.nodes.classify_question
    function_name: main

  - id: question_out_of_scope
    module_path: rag_graphs.ragator.nodes.question_out_of_scope
    function_name: main

  - id: retrieve_documents
    module_path: rag_graphs.ragator.nodes.retrieve_documents
    function_name: main

  - id: generate_llm_answer
    module_path: rag_graphs.ragator.nodes.generate_llm_answer
    function_name: main

edges:
  - from_node: load_rag_params
    to_node: classify_question

  - from_node: classify_question
    condition:
        id: question_classification
        module_path: rag_graphs.ragator.routers.question_classification
        function_name: main
    mapping:
      RAGATOR: retrieve_documents
      RAG: generate_llm_answer
      OTHER: question_out_of_scope

### STATIC ANSWER
  - from_node: question_out_of_scope
    to_node: __end__

### RETRIEVAL AUGMENTED GENERATION
  - from_node: retrieve_documents
    to_node: generate_llm_answer

  - from_node: generate_llm_answer
    to_node: __end__
